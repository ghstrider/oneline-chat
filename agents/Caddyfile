:9000 {
    # BRD Agent routing
    handle_path /brd/* {
        reverse_proxy localhost:8001
    }
    
    handle /brd {
        reverse_proxy localhost:8001
    }
    
    # PRD Agent routing
    handle_path /prd/* {
        reverse_proxy localhost:8002
    }
    
    handle /prd {
        reverse_proxy localhost:8002
    }
    
    # Root endpoint
    handle / {
        respond "Agent Gateway" 200
    }
    
    # Health check for gateway
    handle /health {
        respond "OK" 200
    }
    
    # Enable CORS for all routes
    header {
        Access-Control-Allow-Origin *
        Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
        Access-Control-Allow-Headers "Content-Type, Authorization"
    }
    
    # Logging
    log {
        output stdout
        format console
    }
}